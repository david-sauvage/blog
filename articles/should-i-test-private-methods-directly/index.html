<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Should I test private methods directly ? - David-Sauvage</title><meta name="gridsome:hash" content="d3537144f70f5cd39a3189746daa843013699050"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/blog/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/blog/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/blog/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon-precomposed" type="image/png" sizes="76x76" href="/blog/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon-precomposed" type="image/png" sizes="152x152" href="/blog/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon-precomposed" type="image/png" sizes="120x120" href="/blog/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon-precomposed" type="image/png" sizes="167x167" href="/blog/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/blog/assets/css/0.styles.74827dc8.css" as="style"><link rel="preload" href="/blog/assets/js/app.0e15a5d0.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-article-vue.de2c7fb6.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--src-pages-404-vue.00c60c68.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-articles-vue.4fbedc7a.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.c9ed7f94.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-search-no-header-vue.aba10728.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-search-vue.fc777802.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-custom-page-vue.2319b011.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.78582c33.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.74827dc8.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><!----><header class="bg-shark-500 text-white body-font"><div class="container mx-auto flex flex-wrap p-5 flex-row items-center"><a href="/blog/" class="flex title-font font-medium items-center active"><svg viewBox="0 0 20 20" fill="currentColor" class="academic-cap w-6 h-6"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"></path></svg><span class="ml-2 text-xl">David-Sauvage</span></a><nav class="header-links ml-auto flex flex-wrap items-center text-xl justify-center"><a href="/blog/" class="mr-5 hidden md:block">
        Home
      </a><a href="/blog/articles" class="mr-5 hidden md:block">
        Articles
      </a><a href="/blog/pages/about" class="mr-5 hidden md:block">
        About
      </a><a href="#" type="button" aria-label="Open Navigation" title="Open Navigation" class="block md:hidden mr-5 focus:outline-none"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="menu w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></a><a href="/blog/search"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="search w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></a></nav></div></header><div class="min-h-screen"><section class="relative z-0 h-64 flex flex-wrap content-center page-header bg-gray-200 border-b border-gray-400"><div class="bg-pattern"></div><div class="flex z-10 w-full"><div class="container text-center mx-auto"><div><h1 class="text-4xl lg:text-6xl">
        Should I test private methods directly ?
      </h1></div></div></div></section><div class="container text-left mx-auto"><div class="flex flex-wrap lg:flex-row-reverse py-12"><div class="w-full lg:w-1/4 px-5"><div class="lg:sticky top-0 pt-5 -mt-5"><div class="toc hidden lg:block"><h3 class="border-b-4 pb-3 mb-3 border-gray-200 text-xl">
      On this page
    </h3><ul class="pl-0"><li class="py-1"><a href="#why-this-question-popped-up-" class="hover:text-smalt-blue-700">Why this question popped up ?</a></li><li class="py-1"><a href="#pros-and-con-of-testing-private-methods" class="hover:text-smalt-blue-700">Pros and con of testing private methods</a></li><li class="py-1"><a href="#conclusion" class="hover:text-smalt-blue-700">Conclusion</a></li><li class="py-1"><a href="#links" class="hover:text-smalt-blue-700">Links</a></li></ul></div><div class="tags d-lg-block d-none hidden lg:block mt-4"><h3 class="border-b-4 pb-3 mb-3 border-gray-200 text-xl">
      Tags
    </h3><div class="tags-items break-words"><a href="/blog/tag/testing" class="mr-2 my-4 hover:bg-gray-200 p-1 rounded">
        #testing
      </a><a href="/blog/tag/good-practices" class="mr-2 my-4 hover:bg-gray-200 p-1 rounded">
        #good practices
      </a></div></div><div class="text-right mb-12"><div class="relative inline-block text-left ml-2 block lg:hidden"><div><span class="rounded-md shadow-sm"><button type="button" aria-haspopup="true" aria-expanded="true" class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-black hover:text-white hover:bg-smalt-blue-500 focus:outline-none transition ease-in-out duration-150">
        On this site
      <svg viewBox="0 0 20 20" fill="currentColor" class="-mr-1 ml-2 h-5 w-5"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></span></div><!----></div><div class="relative inline-block text-left ml-2 block lg:hidden"><div><span class="rounded-md shadow-sm"><button type="button" aria-haspopup="true" aria-expanded="true" class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-black hover:text-white hover:bg-smalt-blue-500 focus:outline-none transition ease-in-out duration-150">
        Tags
      <svg viewBox="0 0 20 20" fill="currentColor" class="-mr-1 ml-2 h-5 w-5"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></span></div><!----></div></div></div></div><div class="w-full lg:w-3/4 px-5 prose lg:prose-xl max-w-none"><div class="content"><h2 id="why-this-question-popped-up-"><a href="#why-this-question-popped-up-" aria-hidden="true"><span class="icon icon-link"></span></a>Why this question popped up ?</h2>
<p>During a code review, one of my new coworker used reflection in order to test some private methods. To give some context, we are working on a bit of legacy code were some part of the software lack unit tests and in order for that to change we decided to add tests for every methods that we would tweak while developing new features.</p>
<p>I have to admit that the idea of testing private methods never crossed my mind so even though I was a bit taken off by it instinctively, I did not had any good argument against it so I did what every developer do when he has a question : ask Google ! This article is simply a sum up of my readings ads and what my conviction is after reading them.</p>
<h2 id="pros-and-con-of-testing-private-methods"><a href="#pros-and-con-of-testing-private-methods" aria-hidden="true"><span class="icon icon-link"></span></a>Pros and con of testing private methods</h2>
<p>On legacy code with a lack of code coverage, it may feel like a good idea. Instead of having no coverage for a complete class, it is easier to test small pieces of code rather than testing some gigantic one that does everything and that you did not even wrote. Nonetheless, doing so comes with a price and I'll explain.</p>
<p>It probably hits you already with how I described the situation but if you feel like it's a good idea to test private methods, it's because the class itself has some design flaws. When it comes to mind, think about the single responsability principle : do this class has only one purpose ? Most of the time, you will understand that the class does too much and that some refactoring needs to be done. You will extract some of its code to other classes that will expose public methods and make your software easier to understand for others and easier for you to test.</p>
<p>Keep in mind that your unit tests are the first client to your public api. Testing your code through it shows how it should be used. A great tests suite is a great documentation. It evolves with your code by design and can be a great help for newcomers to understand how a class has been designed.</p>
<p>Another great argument against testing private method is that you will create redundancy in your tests. Since you will both test the private methods and the public ones, your test suite will trigger your private method twice : first by their own test and then by the public ones. Those tests will really look like one another since it will test the same expected results. Having this kind of bloated tests suite will slow you down eventually. Moreso, it will make refactoring harder and will defeat one of the main purpose of unit tests : make refactoring smooth and easy ! Needing a simple change in one private method now makes you getting at least 2 broken tests instead of one. It will have repercussions on your team velocity.</p>
<h2 id="conclusion"><a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>In my opinion, testing private methods directly should be used only when working on legacy code with a sense of urgency. It should be seen as technical debt and as such, it should be paid as soon as possible. In other case, it should be banned given all the flaws it will bring to the codebase.</p>
<h2 id="links"><a href="#links" aria-hidden="true"><span class="icon icon-link"></span></a>Links</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/105007/should-i-test-private-methods-or-only-public-ones" target="_blank" rel="nofollow noopener noreferrer">Stack overflow thread with multiple arguements that goes for and against</a></li>
<li><a href="https://anthonysciamanna.com/2016/02/14/should-private-methods-be-tested.html" target="_blank" rel="nofollow noopener noreferrer">Anthony Sciamanna that is against</a></li>
<li><a href="https://therenegadecoder.com/code/its-okay-to-test-private-methods/" target="_blank" rel="nofollow noopener noreferrer">The renegade coder that is for</a></li>
</ul>
</div></div></div></div></div><footer class="text-white body-font" data-v-4c3aa082><div class="bg-shark-500" data-v-4c3aa082><div class="container px-5 py-6 mx-auto flex items-center gap-2 flex-row-reverse" data-v-4c3aa082><div data-v-4c3aa082><a href="https://github.com/david-sauvage/" target="_blank" rel="noopener" class="flex items-center md:justify-start justify-center" data-v-4c3aa082 data-v-4c3aa082><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 291.32 291.32" xml:space="preserve" width="20px" style="enable-background:new 0 0 291.32 291.32;" data-v-4c3aa082><g data-v-4c3aa082><path d="M145.66,0C65.219,0,0,65.219,0,145.66c0,80.45,65.219,145.66,145.66,145.66
              s145.66-65.21,145.66-145.66C291.319,65.219,226.1,0,145.66,0z M186.462,256.625c-0.838-11.398-1.775-25.518-1.83-31.235
              c-0.364-4.388-0.838-15.549-11.434-22.677c42.068-3.523,62.087-26.774,63.526-57.499c1.202-17.497-5.754-32.883-18.107-45.3
              c0.628-13.282-0.401-29.023-1.256-35.941c-9.486-2.731-31.608,8.949-37.79,13.947c-13.037-5.062-44.945-6.837-64.336,0
              c-13.747-9.668-29.396-15.64-37.926-13.974c-7.875,17.452-2.813,33.948-1.275,35.914c-10.142,9.268-24.289,20.675-20.447,44.572
              c6.163,35.04,30.816,53.94,70.508,58.564c-8.466,1.73-9.896,8.048-10.606,10.788c-26.656,10.997-34.275-6.791-37.644-11.425
              c-11.188-13.847-21.23-9.832-21.849-9.614c-0.601,0.218-1.056,1.092-0.992,1.511c0.564,2.986,6.655,6.018,6.955,6.263
              c8.257,6.154,11.316,17.27,13.2,20.438c11.844,19.473,39.374,11.398,39.638,11.562c0.018,1.702-0.191,16.032-0.355,27.184
              C64.245,245.992,27.311,200.2,27.311,145.66c0-65.365,52.984-118.348,118.348-118.348S264.008,80.295,264.008,145.66
              C264.008,196.668,231.69,239.992,186.462,256.625z" data-v-4c3aa082></path></g></svg></a></div><div data-v-4c3aa082><a href="https://www.linkedin.com/in/david-sauvage-51542536" target="_blank" rel="noopener" class="flex font-medium items-center md:justify-start justify-center" data-v-4c3aa082 data-v-4c3aa082><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 382 382" xml:space="preserve" width="20px" style="enable-background:new 0 0 382 382;" data-v-4c3aa082><path d="M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
              C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
              H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
              c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
              s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
              c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
              c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
              c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
              L341.91,330.654L341.91,330.654z" data-v-4c3aa082></path></svg></a></div></div></div></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"entry":{"title":"Should I test private methods directly ?","content":"\u003Ch2 id=\"why-this-question-popped-up-\"\u003E\u003Ca href=\"#why-this-question-popped-up-\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhy this question popped up ?\u003C\u002Fh2\u003E\n\u003Cp\u003EDuring a code review, one of my new coworker used reflection in order to test some private methods. To give some context, we are working on a bit of legacy code were some part of the software lack unit tests and in order for that to change we decided to add tests for every methods that we would tweak while developing new features.\u003C\u002Fp\u003E\n\u003Cp\u003EI have to admit that the idea of testing private methods never crossed my mind so even though I was a bit taken off by it instinctively, I did not had any good argument against it so I did what every developer do when he has a question : ask Google ! This article is simply a sum up of my readings ads and what my conviction is after reading them.\u003C\u002Fp\u003E\n\u003Ch2 id=\"pros-and-con-of-testing-private-methods\"\u003E\u003Ca href=\"#pros-and-con-of-testing-private-methods\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPros and con of testing private methods\u003C\u002Fh2\u003E\n\u003Cp\u003EOn legacy code with a lack of code coverage, it may feel like a good idea. Instead of having no coverage for a complete class, it is easier to test small pieces of code rather than testing some gigantic one that does everything and that you did not even wrote. Nonetheless, doing so comes with a price and I'll explain.\u003C\u002Fp\u003E\n\u003Cp\u003EIt probably hits you already with how I described the situation but if you feel like it's a good idea to test private methods, it's because the class itself has some design flaws. When it comes to mind, think about the single responsability principle : do this class has only one purpose ? Most of the time, you will understand that the class does too much and that some refactoring needs to be done. You will extract some of its code to other classes that will expose public methods and make your software easier to understand for others and easier for you to test.\u003C\u002Fp\u003E\n\u003Cp\u003EKeep in mind that your unit tests are the first client to your public api. Testing your code through it shows how it should be used. A great tests suite is a great documentation. It evolves with your code by design and can be a great help for newcomers to understand how a class has been designed.\u003C\u002Fp\u003E\n\u003Cp\u003EAnother great argument against testing private method is that you will create redundancy in your tests. Since you will both test the private methods and the public ones, your test suite will trigger your private method twice : first by their own test and then by the public ones. Those tests will really look like one another since it will test the same expected results. Having this kind of bloated tests suite will slow you down eventually. Moreso, it will make refactoring harder and will defeat one of the main purpose of unit tests : make refactoring smooth and easy ! Needing a simple change in one private method now makes you getting at least 2 broken tests instead of one. It will have repercussions on your team velocity.\u003C\u002Fp\u003E\n\u003Ch2 id=\"conclusion\"\u003E\u003Ca href=\"#conclusion\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EConclusion\u003C\u002Fh2\u003E\n\u003Cp\u003EIn my opinion, testing private methods directly should be used only when working on legacy code with a sense of urgency. It should be seen as technical debt and as such, it should be paid as soon as possible. In other case, it should be banned given all the flaws it will bring to the codebase.\u003C\u002Fp\u003E\n\u003Ch2 id=\"links\"\u003E\u003Ca href=\"#links\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ELinks\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F105007\u002Fshould-i-test-private-methods-or-only-public-ones\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EStack overflow thread with multiple arguements that goes for and against\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fanthonysciamanna.com\u002F2016\u002F02\u002F14\u002Fshould-private-methods-be-tested.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EAnthony Sciamanna that is against\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ftherenegadecoder.com\u002Fcode\u002Fits-okay-to-test-private-methods\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EThe renegade coder that is for\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","excerpt":"While working on legacy code a colleague used reflection to unit test private methods. I needed to gather my thoughts as to why this is a bad practice.","createdAt":"3rd August 2021","timeToRead":2,"tags":[{"title":"testing","path":"\u002Ftag\u002Ftesting"},{"title":"good practices","path":"\u002Ftag\u002Fgood-practices"}],"headings":[{"depth":2,"value":"Why this question popped up ?","anchor":"#why-this-question-popped-up-"},{"depth":2,"value":"Pros and con of testing private methods","anchor":"#pros-and-con-of-testing-private-methods"},{"depth":2,"value":"Conclusion","anchor":"#conclusion"},{"depth":2,"value":"Links","anchor":"#links"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.0e15a5d0.js" defer></script><script src="/blog/assets/js/page--src-templates-article-vue.de2c7fb6.js" defer></script>
  </body>
</html>
